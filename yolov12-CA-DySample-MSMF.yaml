# YOLOv12 ğŸš€, AGPL-3.0 license
# YOLOv12 object detection model with P3-P5 outputs. For Usage examples see https://docs.ultralytics.com/tasks/detect

# Parameters
nc: 1 # number of classes
scales: # model compound scaling constants, i.e. 'model=yolov12n.yaml' will call yolov12.yaml with scale 'n'
  # [depth, width, max_channels]
  n: [0.50, 0.25, 1024] # summary: 465 layers, 2,603,056 parameters, 2,603,040 gradients, 6.7 GFLOPs
  s: [0.50, 0.50, 1024] # summary: 465 layers, 9,285,632 parameters, 9,285,616 gradients, 21.7 GFLOPs
  m: [0.50, 1.00, 512] # summary: 501 layers, 20,201,216 parameters, 20,201,200 gradients, 68.1 GFLOPs
  l: [1.00, 1.00, 512] # summary: 831 layers, 26,454,880 parameters, 26,454,864 gradients, 89.7 GFLOPs
  x: [1.00, 1.50, 512] # summary: 831 layers, 59,216,928 parameters, 59,216,912 gradients, 200.3 GFLOPs
backbone:
  - [-1, 1, Conv,    [64, 3, 2]]           # [0]  P1/2
  - [-1, 1, Conv,    [128, 3, 2]]          # [1]  P2/4
  - [-1, 2, C3k2,    [256, False, 0.25]]   # [2]
  - [-1, 1, Conv,    [256, 3, 2]]          # [3]  P3/8
  - [-1, 2, C3k2,    [256, False, 0.25]]   # [4]  â˜…P3(128x128,C=512)
  - [-1, 1, Conv,    [512, 3, 2]]          # [5]  P4/16
  - [-1, 4, A2C2f,   [512, True, 4]]       # [6]  â˜…P4(64x64,C=512)
  - [-1, 1, Conv,    [1024, 3, 2]]         # [7]  P5/32
  - [-1, 4, A2C2f,   [1024, True, 1]]      # [8]  P5(32x32,C=1024)
  - [-1, 1, CoordAtt,[1024]]               # [9]  â˜…P5-CA(32x32,C=1024)

head:
  - [-1, 1, DySample, [2, 'lp', 4, True]]                  # [10] P5â†‘ â†’/16 (1024,64x64)
  - [[-1, 6], 1, Concat, [1]]              # [11] cat([10],[6]) â†’ (1536,64x64)
  - [-1, 2, A2C2f, [512, False, -1]]       # [12] â˜…Head-P4 (512,64x64)

  - [-1, 1, DySample, [2, 'lp', 4, True]]                  # [13] /16â†’/8 (512,128x128)
  - [[-1, 4], 1, Concat, [1]]              # [14] cat([13],[4]) â†’ (1024,128x128)
  - [-1, 2, A2C2f, [256, False, -1]]       # [15] â˜…Head-P3 (256,128x128)

  - [-1, 1, Conv, [256, 3, 2]]             # [16] /8â†’/16 (256,64x64)
  - [[-1, 12], 1, Concat, [1]]             # [17] cat([16],[12]) â†’ (768,64x64)  â† ä¿®æ­£ï¼šæ¥ [12]
  - [-1, 2, A2C2f, [512, False, -1]]       # [18] â˜…Head-P4-refined (512,64x64)

  - [-1, 1, Conv, [512, 3, 2]]             # [19] /16â†’/32 (512,32x32)
  - [[-1, 9], 1, Concat, [1]]              # [20] cat([19],[9]) â†’ (1536,32x32)  â† ä¿®æ­£ï¼šæ¥ [9]=P5-CA
  - [-1, 2, C3k2, [1024, True]]            # [21] â˜…Head-P5 (1024,32x32)

  # ===== åœ¨ Detect å‰åš GGAFusionï¼ˆäºŒæ¬¡èåˆåŒå°ºåº¦ï¼‰ =====
  - [[4, 15], 1, MSMF, []]            # [22] P3:  backbone P3=[4]   + head P3=[15] â†’ (256,128x128)
  - [[6, 18], 1, MSMF, []]            # [23] P4:  backbone P4=[6]   + head P4=[18] â†’ (512,64x64)

  - [[22, 23, 21], 1, Detect, [nc]] # [25] Detect(P3,P4,P5)

